---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { getPath } from "../../utils/navigation";

export function getStaticPaths() {
  return [
    { params: { slug: "advent-of-cyber-2024" } },
    { params: { slug: "homelab-raspberry-pi" } },
    { params: { slug: "wireguard-vpn-setup" } },
  ];
}

const { slug } = Astro.params;

const posts: Record<string, any> = {
  "advent-of-cyber-2024": {
    title: "TryHackMe Advent of Cyber 2024 - Meine Erfahrungen",
    date: "2024-12-15",
    tags: ["CTF", "TryHackMe", "Security"],
    content: `
      <p>Dieses Jahr habe ich zum zweiten Mal am <strong>Advent of Cyber</strong> von TryHackMe teilgenommen. 
      In diesem Artikel teile ich meine Erfahrungen und die wichtigsten Dinge, die ich dabei gelernt habe.</p>
      
      <h2>Was ist Advent of Cyber?</h2>
      <p>Der Advent of Cyber ist eine jährliche Cybersecurity-Challenge von TryHackMe, bei der man jeden Tag 
      im Dezember eine neue Aufgabe löst. Die Challenges sind für Anfänger bis Fortgeschrittene geeignet 
      und decken verschiedene Bereiche der IT-Sicherheit ab.</p>
      
      <h2>Meine Highlights</h2>
      <p>Besonders spannend fand ich die Aufgaben zu:</p>
      <ul>
        <li>Web Application Security</li>
        <li>Log Analysis</li>
        <li>Network Forensics</li>
        <li>Malware Analysis</li>
      </ul>
      
      <h2>Was ich gelernt habe</h2>
      <p>Die wichtigsten Learnings aus diesem Jahr:</p>
      <ol>
        <li>Praktische Erfahrung mit verschiedenen Security-Tools</li>
        <li>Besseres Verständnis für Angriffsvektoren</li>
        <li>Dokumentation ist wichtig - auch für CTFs!</li>
      </ol>
      
      <h2>Fazit</h2>
      <p>Advent of Cyber ist eine großartige Möglichkeit, praktische Security-Skills zu entwickeln. 
      Ich kann es jedem empfehlen, der sich für Cybersecurity interessiert!</p>
    `,
  },
  "homelab-raspberry-pi": {
    title: "Homelab Setup mit Raspberry Pi 5",
    date: "2024-11-20",
    tags: ["Homelab", "Linux", "Server"],
    content: `
      <p>In diesem Artikel zeige ich, wie ich meinen <strong>Raspberry Pi 5</strong> als Homelab-Server 
      eingerichtet habe und welche Services darauf laufen.</p>
      
      <h2>Hardware</h2>
      <ul>
        <li>Raspberry Pi 5 (8GB RAM)</li>
        <li>Samsung SSD via USB 3.0</li>
        <li>Offizielles Netzteil</li>
        <li>Geekworm Gehäuse mit aktiver Kühlung</li>
      </ul>
      
      <h2>Betriebssystem</h2>
      <p>Als Betriebssystem verwende ich <strong>Ubuntu 24.04 LTS Server</strong>. 
      Die Installation war unkompliziert mit dem Raspberry Pi Imager.</p>
      
      <h2>Laufende Services</h2>
      <p>Aktuell laufen folgende Services auf meinem Pi:</p>
      <ul>
        <li><strong>WireGuard VPN</strong> - Sicherer Remote-Zugriff</li>
        <li><strong>Telegram Bot</strong> - Website-Monitoring</li>
        <li><strong>Docker</strong> - Container-Management</li>
      </ul>
      
      <h2>Nächste Schritte</h2>
      <p>Geplant sind noch:</p>
      <ul>
        <li>Pi-hole für DNS-basiertes Ad-Blocking</li>
        <li>Grafana für Monitoring</li>
        <li>Nextcloud für File-Sync</li>
      </ul>
    `,
  },
  "wireguard-vpn-setup": {
    title: "VPN Server mit WireGuard einrichten",
    date: "2024-10-05",
    tags: ["VPN", "WireGuard", "Tutorial"],
    content: `
      <p>WireGuard ist ein modernes VPN-Protokoll, das schneller und einfacher zu konfigurieren ist 
      als traditionelle Lösungen wie OpenVPN. Hier zeige ich die Einrichtung auf einem Linux-Server.</p>
      
      <h2>Vorteile von WireGuard</h2>
      <ul>
        <li>Bessere Performance als OpenVPN</li>
        <li>Einfachere Konfiguration</li>
        <li>Modernes Kryptographie-Design</li>
        <li>Geringer Ressourcenverbrauch</li>
      </ul>
      
      <h2>Installation</h2>
      <p>Auf Ubuntu/Debian:</p>
      <pre><code>sudo apt update
sudo apt install wireguard</code></pre>
      
      <h2>Key-Generierung</h2>
      <pre><code>wg genkey | tee privatekey | wg pubkey > publickey</code></pre>
      
      <h2>Server-Konfiguration</h2>
      <p>Die Konfigurationsdatei liegt unter <code>/etc/wireguard/wg0.conf</code>:</p>
      <pre><code>[Interface]
Address = 10.0.0.1/24
ListenPort = 51820
PrivateKey = [SERVER_PRIVATE_KEY]

[Peer]
PublicKey = [CLIENT_PUBLIC_KEY]
AllowedIPs = 10.0.0.2/32</code></pre>
      
      <h2>Fazit</h2>
      <p>WireGuard ist meine bevorzugte VPN-Lösung für den Homelab-Einsatz. 
      Die Performance ist exzellent und die Einrichtung dauert nur wenige Minuten.</p>
    `,
  },
};

const post = posts[slug];

const formattedDate = new Date(post.date).toLocaleDateString("de-DE", {
  day: "numeric",
  month: "long",
  year: "numeric",
});
---

<BaseLayout title={`${post.title} | Adryano Yohanna`}>
  <Header currentPath="/blog" />

  <main>
    <article class="blog-post">
      <div class="container">
        <header class="post-header">
          <a href={getPath("/blog")} class="back-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="19" y1="12" x2="5" y2="12"></line>
              <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Zurück zum Blog
          </a>

          <h1>{post.title}</h1>

          <div class="post-meta">
            <time datetime={post.date}>{formattedDate}</time>
            <div class="post-tags">
              {post.tags.map((tag: string) => <span class="tag">{tag}</span>)}
            </div>
          </div>
        </header>

        <div class="post-content" set:html={post.content} />

        <footer class="post-footer">
          <a href={getPath("/blog")} class="btn btn-secondary">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="19" y1="12" x2="5" y2="12"></line>
              <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Alle Artikel
          </a>
        </footer>
      </div>
    </article>
  </main>

  <Footer />
</BaseLayout>

<style>
  main {
    padding-top: 72px;
  }

  .blog-post {
    padding: 3rem 0 5rem;
  }

  .blog-post .container {
    max-width: 800px;
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: 2rem;
    transition: color 0.2s ease;
  }

  .back-link:hover {
    color: var(--accent-primary);
  }

  .post-header {
    margin-bottom: 3rem;
  }

  .post-header h1 {
    font-size: clamp(1.75rem, 4vw, 2.5rem);
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  .post-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .post-meta time {
    color: var(--text-muted);
    font-size: 0.9rem;
  }

  .post-tags {
    display: flex;
    gap: 0.5rem;
  }

  .tag {
    font-size: 0.7rem;
    padding: 0.2rem 0.6rem;
  }

  /* Post Content */
  .post-content {
    font-size: 1.1rem;
    line-height: 1.8;
  }

  .post-content :global(h2) {
    font-size: 1.5rem;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary);
  }

  .post-content :global(p) {
    margin-bottom: 1.5rem;
    color: var(--text-secondary);
  }

  .post-content :global(ul),
  .post-content :global(ol) {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
    color: var(--text-secondary);
  }

  .post-content :global(li) {
    margin-bottom: 0.5rem;
  }

  .post-content :global(pre) {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    overflow-x: auto;
    margin-bottom: 1.5rem;
  }

  .post-content :global(code) {
    font-family: "JetBrains Mono", monospace;
    font-size: 0.9rem;
  }

  .post-content :global(p code) {
    background: var(--bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
  }

  .post-content :global(strong) {
    color: var(--text-primary);
    font-weight: 600;
  }

  /* Footer */
  .post-footer {
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border-color);
  }
</style>
